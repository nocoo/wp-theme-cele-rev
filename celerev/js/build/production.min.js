/*!
 * FitVids 1.1
 *
 * Copyright 2013, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com
 * Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/
 * Released under the WTFPL license - http://sam.zoy.org/wtfpl/
 *
 */(function(q){q.fn.fitVids=function(X){var Z={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var L=document.head||document.getElementsByTagName("head")[0],W=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}",K=document.createElement("div");K.innerHTML='<p>x</p><style id="fit-vids-style">'+W+"</style>",L.appendChild(K.childNodes[1])}if(X)q.extend(Z,X);return this.each(function(){var x=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];if(Z.customSelector)x.push(Z.customSelector);var _=".fitvidsignore";if(Z.ignore)_=_+", "+Z.ignore;var E=q(this).find(x.join(","));E=E.not("object object"),E=E.not(_),E.each(function(){var G=q(this);if(G.parents(_).length>0)return;if(this.tagName.toLowerCase()==="embed"&&G.parent("object").length||G.parent(".fluid-width-video-wrapper").length)return;if(!G.css("height")&&!G.css("width")&&(isNaN(G.attr("height"))||isNaN(G.attr("width"))))G.attr("height",9),G.attr("width",16);var F=this.tagName.toLowerCase()==="object"||G.attr("height")&&!isNaN(parseInt(G.attr("height"),10))?parseInt(G.attr("height"),10):G.height(),w=!isNaN(parseInt(G.attr("width"),10))?parseInt(G.attr("width"),10):G.width(),z=F/w;if(!G.attr("name")){var N="fitvid"+q.fn.fitVids._count;G.attr("name",N),q.fn.fitVids._count++}G.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",z*100+"%"),G.removeAttr("height").removeAttr("width")})})},q.fn.fitVids._count=0})(window.jQuery||window.Zepto);jQuery(document).ready(function(q){var X=q("body"),Z=q("#main"),L=q("#overflow-container"),W=q("#max-width"),K=q("#header-image"),x=q("#toggle-navigation"),_=q("#menu-primary-container"),E=q("#menu-primary-items"),G=q(".toggle-dropdown"),F=q("#main-sidebar"),w=q("#sidebar-primary-container"),z=q("#sidebar-inner"),N=q("#scroll-to-top"),I=q("#wpadminbar"),B=0,f=X.hasClass("admin-bar");if(f)B=32;var R=24,j=0,v=!1,H,k=!1;c(),V(),U(),C(),S(),x.on("click",M),G.on("click",p),q(window).on("resize",function(){clearTimeout(H),H=setTimeout(function(){U(),C(),V()},150)}),q(document.body).on("post-load",function(){}),q(".post-content").fitVids({customSelector:'iframe[src*="dailymotion.com"], iframe[src*="slideshare.net"], iframe[src*="animoto.com"], iframe[src*="blip.tv"], iframe[src*="funnyordie.com"], iframe[src*="hulu.com"], iframe[src*="ted.com"], iframe[src*="wordpress.tv"]'});function U(){if(window.innerWidth>899){if(z.outerHeight(!0)<window.innerHeight&&K.length==0)F.addClass("fixed"),C();else if(v==!1)q(window).on("scroll",P),v=!0}else if(v)q(window).off("scroll",P),v=!1}function M(){if(_.hasClass("open"))_.removeClass("open"),q(this).removeClass("open"),w.removeClass("open"),q(this).children("span").text(ct_cele_objectL10n.openMenu),q(this).attr("aria-expanded","false");else _.addClass("open"),q(this).addClass("open"),w.addClass("open"),q(this).children("span").text(ct_cele_objectL10n.closeMenu),q(this).attr("aria-expanded","true")}function p(){var J=q(this).parent(),Q=q(this).siblings("ul"),O=J.parent();if(J.hasClass("open"))J.removeClass("open"),q(this).children("span").text(ct_cele_objectL10n.openMenu),q(this).attr("aria-expanded","false"),Q.css("max-height","0"),Q.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(D){V(),U()}),S(J,"close");else{J.addClass("open"),q(this).children("span").text(ct_cele_objectL10n.closeMenu),q(this).attr("aria-expanded","true");var A=Q.children("li"),Y=0;if(A.each(function(){Y+=q(this).outerHeight()}),Q.css("max-height",Y),O.hasClass("sub-menu"))O.css("max-height",parseInt(O.css("max-height"))+Y+"px");O.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(D){V(),U()}),S(J,"open")}}function c(){var J=0;E.find("ul").each(function(){q(this).children("li").each(function(){q(this).css("transition-delay",J/10+"s"),J++}),J=0});var Q=q(".current-menu-ancestor");Q.addClass("open"),Q.children("ul").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(O){V(),U()})}function P(){if(window.innerWidth<900)return;var J=q(window).scrollTop()+window.innerHeight,Q=z.offset().top+z.outerHeight(!0),O=!1,A=q(this).scrollTop(),Y=!1;if(X.hasClass("rtl"))Y=!0;function D(y,T){if(y&&T)F.css("right",W.offset().left);else if(y)F.css("right","");else if(T)F.css("left",W.offset().left);else F.css("left","")}if(A<j)O=!0;if(j=A,O==!0&&F.hasClass("fixed-bottom"))F.css("top",F.offset().top-R+"px"),D(Y,!1),F.addClass("down-page"),F.removeClass("fixed-bottom");else if(O==!0&&F.hasClass("down-page")&&F.offset().top-B>=q(window).scrollTop())F.removeClass("down-page"),F.addClass("fixed-top"),F.css("top",""),D(Y,!0);else if(F.hasClass("fixed-top")&&q(window).scrollTop()<=parseInt(L.offset().top))F.removeClass("fixed-top"),D(Y,!1);else if((F.hasClass("fixed-top")||F.hasClass("fixed"))&&O==!1)F.css("top",F.offset().top-R+"px"),D(Y,!1),F.removeClass("fixed-top"),F.removeClass("fixed"),F.addClass("down-page");else if(J>=Q&&O==!1&&q(window).scrollTop()>=R){if(F.addClass("fixed-bottom"),z.outerHeight(!0)>=window.innerHeight)F.css("top","");else F.css("top",-24);D(Y,!0),F.removeClass("down-page")}}function C(){if(window.innerWidth>=1100)R=24;else if(window.innerWidth>=1000)R=12;else if(window.innerWidth>=890)R=0;if(f||I.length>0){if(R+=32,F.hasClass("fixed"))F.css("top","32px")}if(K.length>0)R+=K.outerHeight(!0);if(F.hasClass("fixed"))F.css("left",W.offset().left)}function V(){var J=z.outerHeight(!0)+F.offset().top;if(J<window.innerHeight)Z.css("min-height",window.innerHeight);else Z.css("min-height",J)}function S(J,Q){var O=0;if(Q=="close")O=-1;if(J)J.children("ul").children("li").children("a, button").attr("tabindex",O);else E.find("ul").each(function(){q(this).children("li").children().attr("tabindex",-1)})}if(N.length!==0)q(window).on("scroll",function(){if(!k)window.requestAnimationFrame(function(){if(q(window).scrollTop()>=200)N.addClass("visible");else N.removeClass("visible");k=!1}),k=!0},{passive:!0}),N.click(function(J){q("body,html").animate({scrollTop:0},600),q(this).blur()})});window.addEventListener("hashchange",function(q){var X=document.getElementById(location.hash.substring(1));if(X){if(!/^(?:a|select|input|button|textarea)$/i.test(X.tagName))X.tabIndex=-1;X.focus()}},!1);
